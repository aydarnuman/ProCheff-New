(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{760:function(e,s,l){Promise.resolve().then(l.bind(l,9301))},9301:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return f}});var a=l(7437),t=l(2265),i=l(8185),n=l(8635),r=l(1617),c=l(2618),d=l(6669),o=l(2842),m=l(9542),x=l(1115),u=l(4919);function h(e){let{insights:s}=e;return(0,a.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"24px",margin:"24px 0"},children:s.map((e,s)=>(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"1rem",fontWeight:"600"},children:["up"===e.trend?"\uD83D\uDCC8":"down"===e.trend?"\uD83D\uDCC9":"➡️",e.title]})}),(0,a.jsxs)(i.aY,{children:[(0,a.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#10B981",marginBottom:"8px"},children:e.value}),(0,a.jsx)("div",{style:{fontSize:"0.875rem",color:"#94A3B8",marginBottom:"8px"},children:e.change}),(0,a.jsx)("div",{style:{fontSize:"0.875rem",color:"#F1F5F9"},children:e.description})]})]},s))})}function f(){let[e,s]=(0,t.useState)(18),[l,f]=(0,t.useState)(64),[j,p]=(0,t.useState)(70),[g,b]=(0,t.useState)(48.65),[N,v]=(0,t.useState)(!1),[y,D]=(0,t.useState)([]),k=Math.max(0,100-(e+l)),w=[{name:"Protein",value:e,fill:"#22c55e"},{name:"Yağ",value:k,fill:"#f59e0b"},{name:"Karb.",value:l,fill:"#3b82f6"}],C=async()=>{v(!0);try{let s=await fetch("/api/advisor/simulate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({menu:{menuType:"15 G\xfcnl\xfck Men\xfc",totalItems:15,macroBalance:{protein:e,carb:l,fat:k},warnings:[]},offer:{offerPrice:g,totalCost:.7*g,detail:{material:.4*g,labor:.2*g,overhead:.1*g,profit:.3*g},currency:"TRY"},adjustments:{proteinDelta:0,carbDelta:0,profitRateDelta:0}})});if(s.ok){let e=await s.json();if(e.success&&e.data&&e.data.simulation){let s=e.data.simulation;p(s.reasoning.score),b(s.newOffer.offerPrice);let l=s.reasoning,a=[...(l.risks||[]).map(e=>({title:"⚠️ Risk",description:e,type:"finance",score:80})),...(l.suggestions||[]).map(e=>({title:"\uD83D\uDCA1 \xd6neri",description:e,type:"nutrition",score:85})),...(l.compliance||[]).map(e=>({title:"✅ Uyum",description:e,type:"compliance",score:90}))];D(a)}else console.error("Invalid response structure:",e)}else console.error("HTTP Error:",s.status,await s.text())}catch(e){console.error("Simulation error:",e)}finally{v(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,a.jsxs)("div",{className:"mx-auto max-w-7xl",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83E\uDDE0 ProCheff Simulation Dashboard"})}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,a.jsxs)(i.Zb,{className:"lg:col-span-1",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsx)(i.ll,{className:"flex items-center gap-2",children:"\uD83D\uDCCA Men\xfc Dengesi"})}),(0,a.jsxs)(i.aY,{children:[(0,a.jsx)(c.h,{width:"100%",height:200,children:(0,a.jsxs)(d.v,{data:w,children:[(0,a.jsx)(o.K,{dataKey:"name"}),(0,a.jsx)(m.B,{}),(0,a.jsx)(x.u,{formatter:e=>["".concat(e,"%"),""],labelFormatter:e=>"".concat(e)}),(0,a.jsx)(u.$,{dataKey:"value"})]})}),(0,a.jsxs)("div",{className:"mt-4 space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Protein:"}),(0,a.jsxs)("span",{className:"font-semibold",children:[e,"%"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Yağ:"}),(0,a.jsxs)("span",{className:"font-semibold",children:[k,"%"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Karbonhidrat:"}),(0,a.jsxs)("span",{className:"font-semibold",children:[l,"%"]})]})]})]})]}),(0,a.jsxs)(i.Zb,{className:"lg:col-span-1",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsx)(i.ll,{className:"flex items-center gap-2",children:"⚠️ Risk Skoru"})}),(0,a.jsx)(i.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold",children:[j,"/100"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Risk Puanı"})]}),(0,a.jsx)(r.E,{value:j,className:"h-6 ".concat(j>=80?"bg-emerald-500":j>=60?"bg-yellow-500":"bg-red-500")}),(0,a.jsx)("div",{className:"text-sm text-center",children:j>=80?"\uD83D\uDFE2 D\xfcş\xfck Risk":j>=60?"\uD83D\uDFE1 Orta Risk":"\uD83D\uDD34 Y\xfcksek Risk"})]})})]}),(0,a.jsxs)(i.Zb,{className:"lg:col-span-1",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsx)(i.ll,{className:"flex items-center gap-2",children:"\uD83D\uDCB0 Teklif Fiyatı"})}),(0,a.jsx)(i.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-emerald-600",children:[g.toFixed(2)," ₺"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Hesaplanan Fiyat"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium",children:["Protein: ",e,"%"]}),(0,a.jsx)(n.i,{value:[e],min:10,max:30,step:1,onValueChange:e=>s(e[0]),className:"mt-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium",children:["Karbonhidrat: ",l,"%"]}),(0,a.jsx)(n.i,{value:[l],min:40,max:80,step:1,onValueChange:e=>f(e[0]),className:"mt-2"})]})]}),(0,a.jsx)("button",{onClick:C,disabled:N,className:"w-full rounded-lg bg-emerald-600 px-4 py-2 text-white font-medium hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:N?"⏳ Sim\xfclasyon \xc7alışıyor...":"\uD83D\uDD04 Sim\xfclasyon \xc7alıştır"})]})})]})]}),(0,a.jsxs)("div",{className:"mt-8 grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsx)(i.Zb,{children:(0,a.jsx)(i.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-semibold",children:"Beslenme Dengesi"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e>=15&&l<=70?"✅ İyi":"⚠️ Optimize Edilebilir"})]})})}),(0,a.jsx)(i.Zb,{children:(0,a.jsx)(i.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-semibold",children:"Fiyat Durumu"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:g<50?"\uD83D\uDC9A Uygun":"\uD83D\uDC9B Y\xfcksek"})]})})}),(0,a.jsx)(i.Zb,{children:(0,a.jsx)(i.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-semibold",children:"Risk Seviyesi"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:j>=70?"\uD83D\uDFE2 D\xfcş\xfck":j>=50?"\uD83D\uDFE1 Orta":"\uD83D\uDD34 Y\xfcksek"})]})})}),(0,a.jsx)(i.Zb,{children:(0,a.jsx)(i.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-semibold",children:"Genel Durum"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:j>=70&&g<50?"\uD83C\uDFAF Optimal":"⚡ Ayarlama Gerekli"})]})})})]}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsxs)(i.Zb,{className:"col-span-full",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center gap-2",children:["\uD83E\uDDE0 AI Insight Kartları",(0,a.jsxs)("span",{className:"text-sm font-normal text-gray-500",children:["(",y.length," insight)"]})]})}),(0,a.jsx)(i.aY,{children:(0,a.jsx)(h,{insights:y})})]})})]})})}},8185:function(e,s,l){"use strict";l.d(s,{Ol:function(){return i},Zb:function(){return t},aY:function(){return r},ll:function(){return n}});var a=l(7437);function t(e){let{children:s,className:l=""}=e;return(0,a.jsx)("div",{className:l,style:{background:"rgba(35, 39, 47, 0.8)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"12px",padding:"24px",color:"#F1F5F9"},children:s})}function i(e){let{children:s,className:l=""}=e;return(0,a.jsx)("div",{className:l,style:{marginBottom:"16px"},children:s})}function n(e){let{children:s,className:l="",style:t={}}=e;return(0,a.jsx)("h3",{className:l,style:{fontSize:"1.125rem",fontWeight:"bold",color:"#F1F5F9",margin:0,...t},children:s})}function r(e){let{children:s,className:l=""}=e;return(0,a.jsx)("div",{className:l,style:{color:"#F1F5F9"},children:s})}l(2265)},1617:function(e,s,l){"use strict";l.d(s,{E:function(){return n}});var a=l(7437),t=l(2265),i=l(6506);let n=t.forwardRef((e,s)=>{let{className:l,value:t,...n}=e;return(0,a.jsx)(i.fC,{ref:s,className:"relative h-4 w-full overflow-hidden rounded-full bg-gray-200 ".concat(l||""),...n,children:(0,a.jsx)(i.z$,{className:"h-full w-full flex-1 bg-emerald-500 transition-all",style:{transform:"translateX(-".concat(100-(t||0),"%)")}})})});n.displayName=i.fC.displayName},8635:function(e,s,l){"use strict";l.d(s,{i:function(){return n}});var a=l(7437),t=l(2265),i=l(7637);let n=t.forwardRef((e,s)=>{let{className:l,...t}=e;return(0,a.jsxs)(i.fC,{ref:s,className:"relative flex w-full touch-none select-none items-center ".concat(l||""),...t,children:[(0,a.jsx)(i.fQ,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-gray-200",children:(0,a.jsx)(i.e6,{className:"absolute h-full bg-emerald-500"})}),(0,a.jsx)(i.bU,{className:"block h-5 w-5 rounded-full border-2 border-emerald-500 bg-white ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});n.displayName=i.fC.displayName}},function(e){e.O(0,[637,623,971,23,744],function(){return e(e.s=760)}),_N_E=e.O()}]);